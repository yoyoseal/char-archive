<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ page.title }} · {{ site.title }}</title>
    <meta name="description" content="{{ site.description }}" />
    <link rel="stylesheet" href="{{ '/assets/style.css' | relative_url }}" />
  </head>
  <body>
    <header class="topbar">
      <div class="wrap topbar-inner">
        <a class="brand" href="{{ '/' | relative_url }}">{{ site.title }}</a>
        <nav class="nav">
          <a href="{{ '/' | relative_url }}">首頁</a>
          <a href="{{ '/characters/' | relative_url }}">角色</a>
          <a href="{{ '/world/' | relative_url }}">世界觀</a>
        </nav>
      </div>
    </header>

    <main class="wrap">
      <a id="top"></a>
      {% if page.title %}
        <div class="page-head">
          <h1>{{ page.title }}</h1>
          {% if page.subtitle %}
            <p class="subtitle">{{ page.subtitle }}</p>
          {% endif %}
        </div>
      {% endif %}

      <article class="content">
  {{ content }}
</article>

{% if page.collection == 'characters' %}
  {% assign sorted_chars = site.characters | sort: 'order' %}
  {% for c in sorted_chars %}
    {% if c.url == page.url %}
      {% assign idx = forloop.index0 %}
    {% endif %}
  {% endfor %}

  {% if idx != nil %}
    {% assign prev_idx = idx | minus: 1 %}
    {% assign next_idx = idx | plus: 1 %}
    {% assign prev_char = sorted_chars[prev_idx] %}
    {% assign next_char = sorted_chars[next_idx] %}

    <div class="card small" style="display:flex; justify-content:space-between; align-items:center; margin-top:16px;">
      <div>
        {% if prev_char %}
          <a href="{{ prev_char.url | relative_url }}">← 上一角色：{{ prev_char.title }}</a>
        {% endif %}
      </div>

      <div>
        <a href="{{ '/characters/' | relative_url }}">回角色列表</a>
      </div>

      <div style="text-align:right;">
        {% if next_char %}
          <a href="{{ next_char.url | relative_url }}">下一角色：{{ next_char.title }} →</a>
        {% endif %}
      </div>
    </div>
  {% endif %}
{% endif %}


      <footer class="footer">
        <div class="muted">© {{ site.title }} · Powered by GitHub Pages</div>
      </footer>
      <a class="fab-top" href="#top" aria-label="回到最上方">↑</a>
    </main>
  </body>
</html>
